<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create Tessellated Hexagon Maps • sugarbag</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Create Tessellated Hexagon Maps">
<meta property="og:description" content="Create a hexagon tilegram from spatial polygons. Each polygon is
    represented by a hexagon tile, placed as close to it's original centroid
    as possible, with a focus on maintaining spatial relationship to a focal
    point. Developed to aid visualisation and analysis of spatial distributions
    across Australia, which can be challenging due to the concentration of the
    population on the coast and wide open interior.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">sugarbag</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/abs-data.html">ABS Data</a>
    </li>
    <li>
      <a href="articles/tasmania.html">UNKNOWN TITLE</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/srkobakian/sugaRbag">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from this README.Rmd. Please edit this file -->
<div id="sugarbag" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#sugarbag" class="anchor"></a>sugarbag</h1></div>

<p>The <strong>sugarbag</strong> package creates tesselated hexagon maps for visualising geo-spatial data. Hexagons of equal size are positioned to best preserve relationships to focal points, and minimise distance from their actual location. This method provides an alternative to cartograms that allows all regions to be compared on the same visual scale.</p>
<p>Maps containing regions with a few small and densely populated areas are extremely distorted in cartograms. An example of this is a population cartogram of Australia, which distorts the map into an unrecognisable shape. The technique implemented in this package is particularly useful for these regions.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<!-- You can install the released version of sugarbag from [CRAN](https://CRAN.R-project.org) with: -->
<!-- ``` r -->
<!-- install.packages("sugarbag") -->
<!-- ``` -->
<p>You can install the development version from GitHub using</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co"># remotes::install_github("srkobakian/sugarbag")</span></a></code></pre></div>
</div>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
<p>Refer to pkgdown site: <a href="https://srkobakian.github.io/sugarbag/" class="uri">https://srkobakian.github.io/sugarbag/</a></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sugarbag)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(eechidna)</a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co"># We could use create centroids to find centroid for each area.</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co"># This has been done for us and is stored in nat_data16.</span></a>
<a class="sourceLine" id="cb2-6" title="6"></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co"># Find the longitude and latitude centroid for each region or area</span></a>
<a class="sourceLine" id="cb2-8" title="8">centroids &lt;-<span class="st"> </span>nat_data16 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(elect_div, <span class="dt">longitude =</span> long_c, <span class="dt">latitude =</span> lat_c)</a>
<a class="sourceLine" id="cb2-9" title="9"></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="co"># Create a grid of hexagons to allocate centroid on to</span></a>
<a class="sourceLine" id="cb2-11" title="11">grid &lt;-<span class="st"> </span><span class="kw"><a href="reference/create_grid.html">create_grid</a></span>(<span class="dt">centroids =</span> centroids, <span class="dt">hex_size =</span> <span class="dv">1</span>, <span class="dt">buffer_dist =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb2-12" title="12"></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co"># Allocate the centroids to the hexagon grid</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="co"># We have the same amount of rows, as individual regions</span></a>
<a class="sourceLine" id="cb2-15" title="15">hex_allocated &lt;-<span class="st"> </span><span class="kw"><a href="reference/allocate.html">allocate</a></span>(<span class="dt">centroids =</span> centroids,</a>
<a class="sourceLine" id="cb2-16" title="16">  <span class="dt">sf_id =</span> <span class="st">"elect_div"</span>,</a>
<a class="sourceLine" id="cb2-17" title="17">  <span class="dt">hex_grid =</span> grid,</a>
<a class="sourceLine" id="cb2-18" title="18">  <span class="dt">hex_size =</span> <span class="dv">1</span>, <span class="co"># same size used in create_grid</span></a>
<a class="sourceLine" id="cb2-19" title="19">  <span class="dt">hex_filter =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb2-20" title="20">  <span class="dt">focal_points =</span> capital_cities,</a>
<a class="sourceLine" id="cb2-21" title="21">  <span class="dt">width =</span> <span class="dv">30</span>, <span class="dt">verbose =</span> <span class="ot">TRUE</span>) <span class="co"># same column used in create_centroids</span></a>
<a class="sourceLine" id="cb2-22" title="22"></a>
<a class="sourceLine" id="cb2-23" title="23"><span class="co"># We now have 6 points per region, one for each point of a hexagon</span></a>
<a class="sourceLine" id="cb2-24" title="24">h1 &lt;-<span class="st"> </span>hex_allocated <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-25" title="25"><span class="st">  </span><span class="kw"><a href="reference/fortify_hexagon.html">fortify_hexagon</a></span>(<span class="dt">hex_size =</span> <span class="dv">1</span>, <span class="dt">sf_id =</span> <span class="st">"elect_div"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-26" title="26"><span class="st">  </span><span class="kw">left_join</span>(nat_data16, <span class="dt">by =</span> <span class="st">"elect_div"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">poly_type =</span> <span class="st">"hex"</span>)</a>
<a class="sourceLine" id="cb2-27" title="27"></a>
<a class="sourceLine" id="cb2-28" title="28"><span class="co"># When plotting, the polygons are needed, rather than single centroid points.</span></a>
<a class="sourceLine" id="cb2-29" title="29"><span class="co"># We can apply the same function as above, to find 6 points per centroid</span></a>
<a class="sourceLine" id="cb2-30" title="30">p1 &lt;-<span class="st"> </span>nat_data16 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-31" title="31"><span class="st">  </span><span class="kw">select</span>(elect_div, <span class="dt">hex_long =</span> long_c, <span class="dt">hex_lat =</span> lat_c) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-32" title="32"><span class="st">  </span><span class="kw"><a href="reference/fortify_hexagon.html">fortify_hexagon</a></span>(<span class="dt">hex_size =</span> <span class="fl">0.1</span>, <span class="dt">sf_id =</span> <span class="st">"elect_div"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-33" title="33"><span class="st">  </span><span class="kw">left_join</span>(nat_data16, <span class="dt">by =</span> <span class="st">"elect_div"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-34" title="34"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">poly_type =</span> <span class="st">"geo"</span>)</a>
<a class="sourceLine" id="cb2-35" title="35"></a>
<a class="sourceLine" id="cb2-36" title="36">hex_anim &lt;-<span class="st"> </span>h1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-37" title="37"><span class="st">  </span><span class="kw">select</span>(state, elect_div, long, lat, <span class="dt">id =</span> id.x, poly_type) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-38" title="38"><span class="st">  </span><span class="kw">left_join</span>(p1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(elect_div, polygon), <span class="dt">by =</span> <span class="st">"elect_div"</span>)</a>
<a class="sourceLine" id="cb2-39" title="39">geo_anim &lt;-<span class="st"> </span>p1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-40" title="40"><span class="st">  </span><span class="kw">select</span>(elect_div, long, lat, poly_type)</a>
<a class="sourceLine" id="cb2-41" title="41">anim_aus &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(hex_anim, geo_anim)</a>
<a class="sourceLine" id="cb2-42" title="42"></a>
<a class="sourceLine" id="cb2-43" title="43"><span class="co"># Join demographics data from 2016 Census</span></a>
<a class="sourceLine" id="cb2-44" title="44">anim_aus &lt;-<span class="st"> </span>anim_aus <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-45" title="45"><span class="st">  </span><span class="kw">left_join</span>(abs2016 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="dt">elect_div =</span> DivisionNm, AusCitizen, CurrentlyStudying, MedianFamilyIncome, Unemployed, Renting))</a></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">anim_aus <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>long, <span class="dt">y=</span>lat, <span class="dt">group =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/interaction">interaction</a></span>(elect_div))) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> Renting)) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="st">  </span><span class="kw">coord_equal</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="st">  </span><span class="kw">theme_void</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="st">  </span><span class="kw">scale_fill_continuous</span>(<span class="dt">type =</span> <span class="st">"viridis"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="st">  </span><span class="kw">guides</span>(<span class="dt">fill =</span> <span class="kw">guide_colourbar</span>(<span class="dt">title =</span> <span class="ot">NULL</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="st">  </span><span class="co">#theme(legend.position = "bottom") +</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>poly_type)</a></code></pre></div>
<p><img src="reference/figures/README-plot_facet-1.png" width="100%"></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(gganimate)</a>
<a class="sourceLine" id="cb4-2" title="2">anim_aus <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>long, <span class="dt">y=</span>lat, <span class="dt">group =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/interaction">interaction</a></span>(elect_div))) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> Renting)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="st">  </span><span class="kw">coord_equal</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="st">  </span><span class="kw">theme_void</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="st">  </span><span class="kw">scale_fill_continuous</span>(<span class="dt">type =</span> <span class="st">"viridis"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="st">  </span><span class="kw">guides</span>(<span class="dt">fill =</span> <span class="kw">guide_legend</span>(<span class="dt">title =</span> <span class="ot">NULL</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">"bottom"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="st">  </span><span class="kw">transition_states</span>(poly_type)</a></code></pre></div>
<p><img src="reference/figures/README-gganimate-1.gif" width="100%"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/srkobakian/sugaRbag">https://​github.com/​srkobakian/​sugaRbag</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Stephanie Kobakian <br><small class="roles"> Author, maintainer </small>  </li>
<li>Dianne Cook <br><small class="roles"> Author, thesis advisor </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/srkobakian/sugarbag"><img src="https://travis-ci.org/srkobakian/sugarbag.svg?branch=master" alt="Travis-CI Build Status"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Stephanie Kobakian, Dianne Cook.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
